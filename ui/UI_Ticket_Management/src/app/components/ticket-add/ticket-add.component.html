<div class="dashboard-container">
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <h1 class="page-title">Create New Ticket</h1>
        <p class="page-subtitle">Fill in the details below to create a new ticket</p>
      </div>
      <div class="header-right">
        <div class="user-info">
          <div class="user-avatar">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" stroke="currentColor" stroke-width="1.5"/>
              <path d="M20.59 22C20.59 18.13 16.74 15 12 15C7.26 15 3.41 18.13 3.41 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="user-details">
            <span class="user-greeting">Welcome,</span>
            <span class="user-name">{{ username }}</span>
          </div>
        </div>
        <button (click)="logout()" class="btn btn-danger btn-sm logout-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Logout
        </button>
      </div>
    </div>
  </div>

  <div class="dashboard-content">
    <nav class="dashboard-nav">
      <a routerLink="/tickets" routerLinkActive="active" class="nav-link">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Add Ticket
      </a>
      <a routerLink="/tickets/list" routerLinkActive="active" class="nav-link">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        View Tickets
      </a>
    </nav>

    <div class="content-card">
      <form (ngSubmit)="submit()" class="ticket-form" novalidate>
        <!-- <div class="form-section">
          <label class="form-label-large">Ticket Title</label>
          <p class="form-description">Enter a clear and concise title for your ticket</p>
          <input 
            type="text" 
            placeholder="e.g., Unable to access dashboard" 
            [(ngModel)]="ticket.title" 
            name="title" 
            required 
            class="form-input" />
        </div> -->

        <!-- <div class="form-section">
          <label class="form-label-large">Description</label>
          <p class="form-description">Provide detailed information about the issue or request</p>
          <textarea 
            placeholder="Describe the issue in detail. Include steps to reproduce, expected behavior, and actual behavior..."
            [(ngModel)]="ticket.description"
            name="description"
            required
            rows="8"
            class="form-input"></textarea>
        </div> -->

        <div class="form-section">
          <label class="form-label-large">Attach Document</label>
          <p class="form-description">Upload a document related to this ticket. Our AI will automatically summarize it for you.</p>
          
          <div class="file-upload-container">
            <input 
              type="file" 
              id="fileInput"
              (change)="onFileSelected($event)"
              class="file-input"
              accept=".txt,.pdf,.doc,.docx" />
            
            <label for="fileInput" class="file-upload-label" [class.has-file]="selectedFile">
              <div class="file-upload-content">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="upload-icon">
                  <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="upload-text">
                  <span class="upload-main-text" *ngIf="!selectedFile">Click to upload or drag and drop</span>
                  <span class="upload-main-text" *ngIf="selectedFile">File selected</span>
                  <span class="upload-sub-text" *ngIf="!selectedFile">TXT, PDF, DOC, DOCX (Max 10MB)</span>
                  <span class="upload-sub-text" *ngIf="selectedFile">{{ fileName }} ({{ fileSize }})</span>
                </div>
              </div>
            </label>

            <div *ngIf="selectedFile" class="file-preview">
              <div class="file-preview-content">
                <div class="file-info">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="file-icon">
                    <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <div class="file-details">
                    <span class="file-name">{{ fileName }}</span>
                    <span class="file-size">{{ fileSize }}</span>
                  </div>
                </div>
                <button type="button" (click)="removeFile()" class="file-remove-btn">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" [disabled]="isUploading" class="btn btn-primary btn-large">
            <svg *ngIf="!isUploading" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M5 13L9 17L19 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <svg *ngIf="isUploading" class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" stroke-opacity="0.25"/>
              <path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
            </svg>
            {{ isUploading ? 'Creating Ticket...' : 'Create Ticket' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
